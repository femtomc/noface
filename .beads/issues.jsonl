{"id":"noface-3eh","title":"Add timeout handling for hung agents","description":"If an agent process doesn't produce output for a configurable timeout (default: 5 minutes), kill it and report an error.\n\nThis prevents noface from hanging indefinitely if Claude or Codex gets stuck.\n\nAdd config option:\n```toml\n[agents]\ntimeout_seconds = 300\n```","acceptance_criteria":"- Agent process that produces no output for agents.timeout_seconds (default 300s) is terminated and marked failed\n- Config accepts override; zero/negative values rejected\n- Timeout is logged and surfaced in run summary/exit codes\n- Worker resources/locks are cleaned up after timeout and retriable\n- Tests cover timeout kill path and recovery","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T23:00:26.530001-08:00","updated_at":"2025-12-10T07:11:30.00072-08:00","closed_at":"2025-12-10T07:11:30.00072-08:00"}
{"id":"noface-4h2","title":"Align CLI flags with design doc naming (scrum vs planner)","description":"Design doc documents scrum flags/keys (--no-scrum, --scrum-interval, [passes].scrum_enabled/scrum_interval) but the CLI/template only expose planner_* names. Users following the README can't configure passes correctly.","design":"README.md \u003e CLI Options \u0026 Configuration","acceptance_criteria":"- CLI supports --no-scrum/--scrum-interval flags; --help text uses design terminology (keep planner aliases for compatibility).\\n- Config parser accepts scrum_enabled/scrum_interval keys and init template emits them.\\n- Tests cover new flags/config paths; planner behavior continues to work through unified config fields.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-09T23:18:09.11498-08:00","updated_at":"2025-12-09T23:18:09.11498-08:00"}
{"id":"noface-7qx","title":"Wire monowiki design vault into planner","description":"Planner/implementation runs currently don't know where the design documents live. Configure noface to use the hongseok monowiki vault so the planner and agents automatically pull context from the orchestrator and microagent design docs.\nInclude a way to set the vault path in .noface.toml/CLI, validate monowiki availability, and surface a clear warning when the vault is missing.","design":"orchestrator, microagent (hongseok monowiki)","acceptance_criteria":"- .noface.toml supports a [monowiki] block pointing at /Users/femtomc/docs/hongseok/vault (or equivalent CLI flag) and the path is read by noface at startup\n- Planner/implementation prompts show monowiki commands against that vault and can fetch orchestrator/microagent docs when available\n- Missing monowiki CLI or vault path produces a non-fatal warning and planner continues without crashing","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T23:07:11.610328-08:00","updated_at":"2025-12-09T23:14:23.005181-08:00","closed_at":"2025-12-09T23:14:23.005181-08:00"}
{"id":"noface-8fp","title":"Verify file changes against manifest after agent runs","description":"After an implementation agent completes, check git diff against the issue's manifest. If agent modified files outside primary_files or touched forbidden_files, rollback and record violation. Implement in loop.zig after agent completion.","acceptance_criteria":"verifyManifestCompliance function checks git diff; Unauthorized changes trigger rollback; Violations recorded in state.AttemptRecord; Agent retried with stricter prompt on violation","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-10T06:45:55.868754-08:00","updated_at":"2025-12-10T08:02:54.861142-08:00","closed_at":"2025-12-10T08:02:54.861142-08:00","dependencies":[{"issue_id":"noface-8fp","depends_on_id":"noface-gsk","type":"blocks","created_at":"2025-12-10T06:46:13.284984-08:00","created_by":"daemon"}]}
{"id":"noface-a8g","title":"Replace ad-hoc TOML parsing with a real parser + validation","description":"Config.parseToml (src/config.zig) manually splits lines and only handles trivial key=value strings; it ignores inline comments, escapes, arrays, and nested tables, and silently trims quotes instead of parsing types. Valid TOML like strings containing '=' or booleans with inline comments are misread, which makes .noface.toml brittle and hard to debug. Swap in a proper TOML parser or at least a stricter validation layer that rejects malformed input and surfaces errors with file/line context.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-10T08:59:16.677421-08:00","updated_at":"2025-12-10T08:59:16.677421-08:00"}
{"id":"noface-b0h","title":"noface serve is missing live dashboard APIs","description":"The Zig web server at src/web.zig only serves static assets plus /api/issues and /api/state; /api/sessions returns {} and there is no /ws endpoint. The frontend (web/src/hooks/useWebSocket.ts) expects a websocket for live updates and session playback, and the Bun dev server (web/server/index.ts) streams issues/state and summarizes session logs from /tmp. Bring noface serve to parity by wiring a websocket endpoint and real /api/sessions that reads recent noface-session-*.json logs.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-10T08:58:59.697929-08:00","updated_at":"2025-12-10T08:58:59.697929-08:00"}
{"id":"noface-bfd","title":"Show progress indicator during long operations","description":"Add a simple progress indicator (spinner or dots) when waiting for:\n- Agent responses\n- Build commands\n- Test runs\n\nThis gives users feedback that noface is still working.","acceptance_criteria":"- Progress indicator (spinner/dots) shows during agent responses, build commands, and test runs\n- Indicator respects quiet/non-interactive modes and does not garble normal logs\n- Hides/finishes cleanly when operation completes or errors\n- Basic tests cover indicator toggle and formatting","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-09T23:00:28.958713-08:00","updated_at":"2025-12-10T06:52:35.776279-08:00"}
{"id":"noface-bs5","title":"Show tool parameters in streaming output","description":"When Claude uses tools during implementation, only the tool name is shown (e.g. '[TOOL] Read'). This makes it hard to follow what the agent is doing. Should extract and display key parameters: file_path for Read/Edit, command for Bash, etc.","acceptance_criteria":"Tool output shows contextual info like '[TOOL] Read src/config.zig' or '[TOOL] Bash: zig build test'","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-09T23:22:21.074744-08:00","updated_at":"2025-12-09T23:24:42.472851-08:00","closed_at":"2025-12-09T23:24:42.472851-08:00"}
{"id":"noface-dyf","title":"Event-driven planner instead of interval-based","description":"Currently planner runs every N iterations. Change to event-driven: run planner only when (1) no ready issues, (2) breakdown requested, (3) batch completed and need new batch. Reduces unnecessary planner invocations and token cost.","acceptance_criteria":"Planner runs on-demand not on interval; Triggered by empty queue or batch completion; Config option to choose mode; Token usage reduced","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-10T06:47:04.597739-08:00","updated_at":"2025-12-10T06:47:04.597739-08:00"}
{"id":"noface-dym","title":"LSP integration for semantic code navigation","description":"Integrate with language servers (zls, rust-analyzer, gopls, etc.) to provide semantic code navigation tools for agents. Spawn LSP as subprocess, communicate via JSON-RPC. Expose tools: goto_definition, find_references, list_symbols, get_callers/callees. Build code graph at startup for fast queries.","acceptance_criteria":"LSP client spawns and initializes language server; goto_definition and find_references work; Code graph cached for call hierarchy queries; Graceful fallback when LSP unavailable","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-10T07:09:30.867209-08:00","updated_at":"2025-12-10T07:09:30.867209-08:00","dependencies":[{"issue_id":"noface-dym","depends_on_id":"noface-noy","type":"blocks","created_at":"2025-12-10T07:09:40.988372-08:00","created_by":"daemon"}]}
{"id":"noface-e4p","title":"Add --verbose flag for detailed logging","description":"Add a --verbose/-V flag that enables more detailed logging output during execution. When enabled, show:\n- Full commands being executed\n- Timing information for each step\n- Agent prompts being sent (truncated)\n- Raw API responses (summarized)\n\nThis helps with debugging when things go wrong.","acceptance_criteria":"- --verbose/-V flag exists (default off) and parsed via CLI/config\n- Verbose mode prints executed commands, step timings, truncated prompts, summarized API responses\n- Normal mode output remains unchanged/minimal; verbose respects log level for subcomponents\n- Tests cover flag parsing and representative verbose output toggle","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-09T23:00:12.682282-08:00","updated_at":"2025-12-10T06:52:26.970659-08:00"}
{"id":"noface-f77","title":"Worker timeout should track idle output, not wall-clock runtime","description":"agent_timeout_seconds is documented as \"Kill agent if no output for N seconds\" (src/main.zig:108), and streaming runs enforce it based on idle output. In the worker pool path (src/worker_pool.zig:320-360) we instead kill a worker once elapsed wall time exceeds the timeout, even if it is still producing output (e.g., long builds/tests). That causes false positives and interrupts successful work. Track last-output heartbeat from workers (or use a generous wall clock + idle threshold) so only idle workers are terminated, and add coverage around long-running but chatty workers.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-10T08:58:43.812024-08:00","updated_at":"2025-12-10T08:58:43.812024-08:00"}
{"id":"noface-fp4","title":"Planner groups issues into parallel batches","description":"Enhance planner to analyze issue manifests and group non-conflicting issues into parallel batches. Issues with disjoint primary_files can run in same batch. Output BATCH blocks with issue lists. Store batches in state.Batch.","acceptance_criteria":"Planner outputs PARALLEL_BATCH sections; Batches stored in orchestrator state; Issues within batch have no file conflicts; Batches respect beads dependency ordering","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-10T06:46:13.341275-08:00","updated_at":"2025-12-10T08:17:56.446753-08:00","closed_at":"2025-12-10T08:17:56.446753-08:00","dependencies":[{"issue_id":"noface-fp4","depends_on_id":"noface-gsk","type":"blocks","created_at":"2025-12-10T06:46:26.902582-08:00","created_by":"daemon"}]}
{"id":"noface-gsk","title":"Planner generates file manifests for issues","description":"Enhance the planner prompt to analyze each issue and predict which files will be modified. Store manifests in state.IssueState or as beads comments. Manifests include: primary_files (exclusive write), read_files (shared read), forbidden_files (must not touch).","acceptance_criteria":"Planner outputs MANIFEST blocks for issues; Manifests parsed and stored in orchestrator state; bd comments store manifest for persistence across runs","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-10T06:45:44.237005-08:00","updated_at":"2025-12-10T07:33:48.733303-08:00","closed_at":"2025-12-10T07:33:48.733303-08:00"}
{"id":"noface-hq3","title":"Auto-detect languages and configure LSPs in noface init","description":"Enhance noface init to scan the project for language markers (build.zig, Cargo.toml, package.json, etc.), detect which LSPs are needed, check availability, and configure .noface.toml automatically. Optionally use an initializer agent for complex setups.","acceptance_criteria":"Language detection from file extensions and build files; LSP availability check with install suggestions; Generated .noface.toml includes [lsp] config; Works for mono-repos with multiple languages","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-10T07:09:30.923312-08:00","updated_at":"2025-12-10T07:09:30.923312-08:00","dependencies":[{"issue_id":"noface-hq3","depends_on_id":"noface-dym","type":"blocks","created_at":"2025-12-10T07:09:41.029-08:00","created_by":"daemon"}]}
{"id":"noface-jba","title":"Implement multi-process worker pool","description":"Replace sequential agent execution with parallel worker pool. Spawn N worker processes (configurable via num_workers). Each worker runs its own agent session. Coordinator assigns issues from current batch to idle workers. Use state.WorkerState to track lifecycle.","acceptance_criteria":"WorkerPool struct manages N child processes; Workers execute in parallel; Coordinator waits for batch completion before next batch; Worker crashes detected and recovered","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-10T06:46:26.958412-08:00","updated_at":"2025-12-10T08:51:57.417587-08:00","closed_at":"2025-12-10T08:51:57.417587-08:00","dependencies":[{"issue_id":"noface-jba","depends_on_id":"noface-fp4","type":"blocks","created_at":"2025-12-10T06:46:41.28963-08:00","created_by":"daemon"},{"issue_id":"noface-jba","depends_on_id":"noface-8fp","type":"blocks","created_at":"2025-12-10T06:46:41.329746-08:00","created_by":"daemon"}]}
{"id":"noface-jwo","title":"Add retry logic for transient agent failures","description":"When Claude or Codex fails due to transient errors (rate limits, network issues, API errors), retry with exponential backoff instead of failing immediately.\n\nImplementation:\n- Detect retryable errors (429, 5xx, network timeout)\n- Retry up to 3 times with exponential backoff (1s, 2s, 4s)\n- Log retry attempts\n- Only fail after all retries exhausted","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T23:00:13.625391-08:00","updated_at":"2025-12-09T23:29:56.158679-08:00","closed_at":"2025-12-09T23:29:56.158679-08:00"}
{"id":"noface-noy","title":"BM25 code search index for token-efficient retrieval","description":"Implement a BM25 lexical search index that agents can use to find relevant code without full file contents in prompts. Index codebase into ~50 line chunks, provide search tool that returns file:line-range references with relevance scores. Dramatically reduces token usage for large codebases.","acceptance_criteria":"Index built at startup from source files; search() returns ranked results with file:line-range; Sub-100ms query latency on typical codebases; Integration test shows token reduction","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-10T07:09:15.122453-08:00","updated_at":"2025-12-10T07:09:15.122453-08:00","dependencies":[{"issue_id":"noface-noy","depends_on_id":"noface-t95","type":"blocks","created_at":"2025-12-10T07:09:41.067108-08:00","created_by":"daemon"}]}
{"id":"noface-oqi","title":"Add built-in GitHub Issues sync when sync_to_github is enabled","description":"Main loop step 6 in the design doc is to sync beads issues to GitHub. Today we just call an optional shell script and otherwise do nothing, so the default sync_to_github=true does not actually mirror status upstream.","design":"README.md \u003e How It Works (step 6)","acceptance_criteria":"- Provide a built-in sync helper that uses gh CLI to create/update/close the corresponding GitHub issue for the current bead when sync_to_github is true (respect dry-run).\\n- Auto-detect target repo from git remotes or config; emit clear warnings and continue if gh is unavailable/misconfigured.\\n- Minimal test or mockable wrapper to exercise sync logic; docs/--help mention expected GitHub setup.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T23:18:18.937106-08:00","updated_at":"2025-12-10T06:16:58.593188-08:00","closed_at":"2025-12-10T06:16:58.593188-08:00"}
{"id":"noface-s3n","title":"File lock acquisition before worker dispatch","description":"Before assigning issue to worker, acquire locks for all primary_files in manifest. Use state.tryAcquireLocks(). If any file locked by another issue, skip and try next issue. Release locks on completion/failure. Clean up stale locks from crashed workers.","acceptance_criteria":"Locks acquired before worker starts; Conflicting issues wait for locks; Locks released on completion; Stale lock cleanup on crash recovery","status":"in_progress","priority":1,"issue_type":"feature","created_at":"2025-12-10T06:46:41.384087-08:00","updated_at":"2025-12-10T08:52:48.333248-08:00","dependencies":[{"issue_id":"noface-s3n","depends_on_id":"noface-jba","type":"blocks","created_at":"2025-12-10T06:46:52.164439-08:00","created_by":"daemon"},{"issue_id":"noface-s3n","depends_on_id":"noface-gsk","type":"blocks","created_at":"2025-12-10T06:52:16.683807-08:00","created_by":"daemon"}]}
{"id":"noface-t95","title":"Minimal context via file references instead of content","description":"Reduce token cost by passing file REFERENCES instead of full content. Orchestrator pre-analyzes relevant code sections. Prompt includes pointers (file:line-range) not content. Agent uses Read tool to fetch what it needs. Trade-off: more tool calls, much smaller prompts.","acceptance_criteria":"Implementation prompts use reference format; Prompt size reduced by 50%+; Agent successfully uses Read tool for content; Token usage measurably decreased","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-10T06:46:52.220243-08:00","updated_at":"2025-12-10T06:46:52.220243-08:00","dependencies":[{"issue_id":"noface-t95","depends_on_id":"noface-s3n","type":"blocks","created_at":"2025-12-10T06:47:21.394847-08:00","created_by":"daemon"}]}
{"id":"noface-y93","title":"Write progress file updates when --progress-file is set","description":"--progress-file is parsed and mentioned in prompts, but noface never writes to the progress markdown itself. The design doc expects the flag to update the file so users can track runs automatically.","design":"README.md \u003e CLI Options (Output options)","acceptance_criteria":"- When progress_file is configured, each iteration appends/updates the markdown file with timestamp, issue id, status (completed/blocked), and short summary.\\n- Creates the file if missing; on write failure, log a warning and continue.\\n- Dry-run mode logs intent without writing; basic test covers progress writer logic.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-09T23:18:14.18455-08:00","updated_at":"2025-12-09T23:18:14.18455-08:00"}
{"id":"noface-yrc","title":"Persist manifests and batches across restarts","description":"State persistence in src/state.zig only writes metadata, worker status, bare issue status, and locks; manifests, pending/current batches, and attempt history are dropped. After a crash/restart the orchestrator loses manifest permissions and the parallel execution plan, so crash recovery cannot reconstruct locks or pending work. Serialize/deserialize manifests, batch queue/current batch, and last attempts in state.json and add tests to verify crash recovery preserves them safely.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-10T08:58:28.153084-08:00","updated_at":"2025-12-10T08:58:28.153084-08:00"}
{"id":"noface-zdk","title":"Validate config file and warn about issues","description":"Add config validation that warns users about:\n- Unknown keys in .noface.toml (typos)\n- Invalid values (negative intervals, empty commands)\n- Missing required tools before starting\n- Deprecated options\n\nPrint warnings at startup but don't fail unless critical.","acceptance_criteria":"- Startup validation warns on unknown keys with file/line context; typos do not block execution\n- Invalid values (negative intervals, empty commands) are rejected or warned with suggested fix; critical errors fail fast before run\n- Missing required tools/deprecated options are surfaced before planning/dispatch\n- Tests cover representative valid/invalid configs and warning output","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-09T23:00:14.783734-08:00","updated_at":"2025-12-10T06:52:31.703177-08:00"}
