<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AGENT — noface</title>
  <meta name="description" content="AGENT">
  <meta name="author" content="noface">
  <meta name="monowiki-base-url" content="/">
  <meta name="monowiki-note-slug" content="agent">
  
  <link rel="stylesheet" href="/css/reset.css">
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/previews.css">
  <link rel="stylesheet" href="/css/graph.css">
  <link rel="stylesheet" href="/css/search.css">

  <!-- Frontend bundle -->
  <script type="module" src="/js/bundle.js"></script>
</head>
<body>
  <header class="header">
    <div class="header-content">
      <nav class="nav">
        <a href="/index.html">home</a>
        
        <a href="https://github.com/femtomc/noface">github</a>
        <button id="search-trigger" class="search-trigger" aria-label="Search">
          <span class="search-trigger-text">search</span>
          <span class="search-trigger-hint">⌘K</span>
        </button>
      </nav>
    </div>
  </header>

  <main>
    <article>
      
      

      

      
        <div id="toc" class="toc-container">
          <nav class="toc-nav"><h3>Contents</h3><ul class="toc-list"><li class="toc-level-1"><a href="#monowiki-agent-guide">monowiki Agent Guide</a></li></ul></nav>
        </div>
        

      <div class="page-subheader">
        
          <button id="copy-page-source" class="copy-page-btn" type="button" aria-label="Copy page Markdown">Copy page source</button>
          
        <button id="global-graph-toggle" class="graph-btn" type="button" aria-label="Open graph">Graph</button>
      </div>

      <h1 id="monowiki-agent-guide">monowiki Agent Guide<a class="heading-anchor" href="#monowiki-agent-guide" aria-label="Link to heading">#</a></h1>
<p>This vault ships with a CLI that is designed to be agent-friendly. Key commands:</p>
<ul>
<li><code>monowiki build</code>: render the site to <code>docs/</code> and emit <code>index.json</code>, <code>graph.json</code>, <code>previews.json</code>, and a cached site index at <code>docs/.site_index.json</code>.</li>
<li><code>monowiki dev</code>: serve the site locally with live rebuilds <strong>and</strong> JSON endpoints:
<ul>
<li><code>/api/search?q=term&amp;limit=10</code></li>
<li><code>/api/note/&lt;slug&gt;</code></li>
<li><code>/api/graph/&lt;slug&gt;?depth=2&amp;direction=both</code></li>
<li><code>/api/graph/path?from=a&amp;to=b&amp;max_depth=5</code></li>
</ul>
</li>
<li><code>monowiki search "&lt;query&gt;" --json --limit 5 --types essay,thought --tags rust,notes --with-links</code> for machine-readable results.</li>
<li><code>monowiki note &lt;slug&gt; --format json --with-links</code> to fetch a single note (frontmatter, rendered HTML, raw body, links).</li>
<li><code>monowiki graph neighbors --slug &lt;slug&gt; --depth 2 --direction outgoing --json</code> to fan out.</li>
<li><code>monowiki graph path --from a --to b --max-depth 4 --json</code> to find shortest paths.</li>
<li><code>monowiki export sections --format jsonl --with-links</code> to stream embedding-ready chunks.</li>
<li><code>monowiki watch</code> streams JSON change events from <code>vault/</code> (one line per event).</li>
</ul>
<p>JSON schemas</p>
<ul>
<li>CLI <code>--json</code> and dev server <code>/api/*</code> responses are wrapped in:</li>
</ul>
<div class="code-block">
<div class="code-toolbar"><button class="copy-code-btn" type="button" aria-label="Copy code">Copy</button></div>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">{
</span><span style="color:#323232;">  </span><span style="font-weight:bold;color:#183691;">&quot;schema_version&quot;</span><span style="color:#323232;">: &quot;2024-11-llm-v1&quot;,
</span><span style="color:#323232;">  </span><span style="font-weight:bold;color:#183691;">&quot;kind&quot;</span><span style="color:#323232;">: &quot;search.results | note.full | graph.neighbors | graph.path&quot;,
</span><span style="color:#323232;">  </span><span style="font-weight:bold;color:#183691;">&quot;data&quot;</span><span style="color:#323232;">: { </span><span style="background-color:#f5f5f5;font-weight:bold;color:#b52a1d;">...</span><span style="color:#323232;"> }
</span><span style="color:#323232;">}
</span></pre>

</div>
<ul>
<li>Search results include <code>id</code>, <code>slug</code>, <code>url</code>, <code>title</code>, <code>section_title</code>, <code>snippet</code>, <code>tags</code>, <code>type</code>, <code>score</code>, <code>outgoing</code>, <code>backlinks</code>.</li>
<li>Notes include frontmatter, HTML, raw markdown, toc, outgoing, backlinks, and dates.</li>
<li>Graph neighbors include nodes with <code>slug/title/url/tags/type</code> and edges; graph path returns the path array.</li>
</ul>
<p>Performance tips</p>
<ul>
<li><code>monowiki build</code>/<code>dev</code> write <code>docs/.site_index.json</code>. The <code>note</code>, <code>graph</code>, and <code>export</code> commands reuse this cache to avoid rebuilding when only reading data. Delete it if you need a fresh rebuild.</li>
</ul>
<p>Conventions:</p>
<ul>
<li>Slugs come from frontmatter <code>slug</code>, otherwise the filename slugified.</li>
<li>Drafts are excluded from exports/search when <code>type: draft</code> or <code>draft: true</code>.</li>
<li>Backlinks are computed from <code>[[WikiLinks]]</code> in markdown and exposed via <code>graph.json</code> and the CLI/API.</li>
<li>Section-level search slices HTML headings into chunks; IDs match rendered anchors.</li>
</ul>
<p>Tips for agents:</p>
<ul>
<li>Use <code>monowiki export sections</code> to build retrieval datasets without scraping.</li>
<li>Use <code>monowiki note &lt;slug&gt; --format json</code> to fetch full context (toc, html, raw markdown) before editing.</li>
<li>Prefer the dev server APIs during interactive sessions; they reflect live rebuilds.</li>
</ul>
<p>Happy hacking!</p>


      
    </article>

    
    <hr>

    <p>
      <a href="/index.html">← Back to home</a>
    </p>
    
    </article>

  </main>



  <!-- Global Graph Modal -->
  <div class="global-graph-outer" id="global-graph-outer">
    <div class="global-graph-container" id="global-graph-container"></div>
  </div>

  <!-- Search Modal -->
  <div id="search-modal">
    <div class="search-modal-wrapper">
      <div class="search-modal-header">
        <input
          type="text"
          id="search-modal-input"
          class="search-modal-input"
          placeholder="Search documentation..."
          autocomplete="off"
        />
      </div>
      <div class="search-modal-tabs">
        <button class="search-tab active" data-tab="results">Results</button>
        <button class="search-tab" data-tab="graph">Graph</button>
      </div>
      <div class="search-modal-content">
        <div class="search-tab-panel active" id="search-tab-results">
          <div class="search-modal-results" id="search-modal-results"></div>
        </div>
        <div class="search-tab-panel" id="search-tab-graph">
          <div class="search-graph-container" id="search-graph-container"></div>
        </div>
      </div>
      <div class="search-modal-footer">
        <div class="search-hint">
          <span><kbd>↑</kbd><kbd>↓</kbd> Navigate</span>
          <span><kbd>↵</kbd> Select</span>
          <span><kbd>ESC</kbd> Close</span>
        </div>
        <div class="search-count"></div>
      </div>
    </div>
  </div>

  
    <script id="page-source-data" type="application/json">"# monowiki Agent Guide\n\nThis vault ships with a CLI that is designed to be agent-friendly. Key commands:\n\n- `monowiki build`: render the site to `docs/` and emit `index.json`, `graph.json`, `previews.json`, and a cached site index at `docs/.site_index.json`.\n- `monowiki dev`: serve the site locally with live rebuilds **and** JSON endpoints:\n  - `/api/search?q=term\u0026limit=10`\n  - `/api/note/\u003cslug\u003e`\n  - `/api/graph/\u003cslug\u003e?depth=2\u0026direction=both`\n  - `/api/graph/path?from=a\u0026to=b\u0026max_depth=5`\n- `monowiki search \"\u003cquery\u003e\" --json --limit 5 --types essay,thought --tags rust,notes --with-links` for machine-readable results.\n- `monowiki note \u003cslug\u003e --format json --with-links` to fetch a single note (frontmatter, rendered HTML, raw body, links).\n- `monowiki graph neighbors --slug \u003cslug\u003e --depth 2 --direction outgoing --json` to fan out.\n- `monowiki graph path --from a --to b --max-depth 4 --json` to find shortest paths.\n- `monowiki export sections --format jsonl --with-links` to stream embedding-ready chunks.\n- `monowiki watch` streams JSON change events from `vault/` (one line per event).\n\nJSON schemas\n\n- CLI `--json` and dev server `/api/*` responses are wrapped in:\n\n```json\n{\n  \"schema_version\": \"2024-11-llm-v1\",\n  \"kind\": \"search.results | note.full | graph.neighbors | graph.path\",\n  \"data\": { ... }\n}\n```\n\n- Search results include `id`, `slug`, `url`, `title`, `section_title`, `snippet`, `tags`, `type`, `score`, `outgoing`, `backlinks`.\n- Notes include frontmatter, HTML, raw markdown, toc, outgoing, backlinks, and dates.\n- Graph neighbors include nodes with `slug/title/url/tags/type` and edges; graph path returns the path array.\n\nPerformance tips\n\n- `monowiki build`/`dev` write `docs/.site_index.json`. The `note`, `graph`, and `export` commands reuse this cache to avoid rebuilding when only reading data. Delete it if you need a fresh rebuild.\n\nConventions:\n- Slugs come from frontmatter `slug`, otherwise the filename slugified.\n- Drafts are excluded from exports/search when `type: draft` or `draft: true`.\n- Backlinks are computed from `[[WikiLinks]]` in markdown and exposed via `graph.json` and the CLI/API.\n- Section-level search slices HTML headings into chunks; IDs match rendered anchors.\n\nTips for agents:\n- Use `monowiki export sections` to build retrieval datasets without scraping.\n- Use `monowiki note \u003cslug\u003e --format json` to fetch full context (toc, html, raw markdown) before editing.\n- Prefer the dev server APIs during interactive sessions; they reflect live rebuilds.\n\nHappy hacking!\n"</script>
    

</body>
</html>